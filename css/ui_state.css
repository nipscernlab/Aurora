/**
 * =====================================================================================
 * Aurora IDE - UI State Styling
 * Smooth transitions and mode-specific visual effects
 * =====================================================================================
 */

/* ===================================================================================
 * BODY GLOW EFFECTS - Temporary animated gradient borders for mode changes
 * =================================================================================== */

body {
    position: relative;
}

/* Glow effect layer */
body::after {
    content: "";
    position: fixed;
    top: 8px;
    left: 8px;
    right: 8px;
    bottom: 8px;
    z-index: -1;
    border-radius: var(--radius-lg);
    filter: blur(20px);
    opacity: 0;
    transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    animation: animateGlow 2.5s linear infinite;
    background-size: 200% 200%;
    pointer-events: none;
}

/* Verilog Mode - Green/Cyan gradient glow */
body.verilog-mode-active::after {
    opacity: 0.7;
    background: linear-gradient(
        to right,
        #2CFF05,
        #00e9ff,
        #3498db,
        #00e9ff,
        #2CFF05
    );
    background-size: 200% 200%;
}

/* Processor Mode - Purple/Pink gradient glow */
body.processor-mode-active::after {
    opacity: 0.7;
    background: linear-gradient(
        to right,
        var(--accent-primary),
        var(--accent-hover),
        #da70d6,
        var(--accent-hover),
        var(--accent-primary)
    );
    background-size: 200% 200%;
}

/* Project Mode - Multi-color gradient glow */
body.project-mode-active::after {
    opacity: 0.7;
    background: linear-gradient(
        to right,
        #ff5770,
        #e4428d,
        #c42da8,
        #9e16c3,
        var(--accent-primary),
        #9e16c3,
        #c42da8,
        #e4428d,
        #ff5770
    );
    background-size: 200% 200%;
}

/* Fading state - smooth disappearance */
body.glow-fading::after {
    opacity: 0;
}

/* Glow animation */
@keyframes animateGlow {
    0% {
        background-position: 0% 50%;
    }
    100% {
        background-position: 200% 50%;
    }
}

/* ===================================================================================
 * SMOOTH HIDE/SHOW ANIMATIONS
 * =================================================================================== */

/* Hiding: Fade out opacity */
.ui-state-hiding {
    opacity: 0 !important;
    transition: opacity 0.2s cubic-bezier(0.4, 0, 1, 1) !important;
}

/* Collapsing: Reduce height */
.ui-state-collapsing {
    overflow: hidden !important;
    transition: height 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                margin 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                padding 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

/* Hidden: Completely hidden */
.ui-state-hidden {
    display: none !important;
    opacity: 0 !important;
    height: 0 !important;
    overflow: hidden !important;
    pointer-events: none !important;
}

/* Expanding: Increase height */
.ui-state-expanding {
    overflow: hidden !important;
    opacity: 0 !important;
    transition: height 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                opacity 0.3s cubic-bezier(0, 0, 0.2, 1) 0.1s !important;
}

/* Showing: Fade in opacity */
.ui-state-showing {
    opacity: 1 !important;
}

/* ===================================================================================
 * TERMINAL TABS - Smooth transitions
 * =================================================================================== */

.terminal-tabs {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    transition: all var(--transition-normal);
}

.terminal-tabs button.tab {
    transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ===================================================================================
 * TERMINAL CONTENT - Smooth transitions
 * =================================================================================== */

.terminal-content {
    transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.terminal-content.hidden {
    display: none;
}

/* ===================================================================================
 * TOOLBAR BUTTONS - Preserve original styling
 * =================================================================================== */

/* No changes to toolbar button base styles */
/* Transitions are only for show/hide animations */

/* ===================================================================================
 * COMPILE ALL GROUP - Smooth transitions
 * =================================================================================== */

.compile-all-group {
    transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Cole este CSS atualizado no seu arquivo */

.toggle-group {
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  display: inline-flex;
  overflow: hidden;
  background-color: var(--bg-tertiary);
}

.toggle-group input[type="radio"] {
  opacity: 0;
  position: absolute;
  width: 0;
  height: 0;
}

.toggle-group label {
  /* ADIÇÃO CRÍTICA ABAIXO */
  position: relative; /* Essencial para o posicionamento do brilho */

  cursor: pointer;
  padding: var(--space-2) var(--space-4);
  transition: background-color var(--transition-fast), color var(--transition-fast);
  color: var(--text-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  user-select: none;
}

.toggle-group input[type="radio"]:not(:checked) + label:hover {
  background-color: var(--overlay-hover);
  color: var(--text-primary);
}

.toggle-group input[type="radio"]:checked + label {
  background-color: var(--accent-subtle-bg);
}


.toggle-group input[id="Processor Mode"]:checked + label {
  color: #67b6d5;
}

.toggle-group input[id="Project Mode"]:checked + label {
  color: #a92218;
}

.toggle-group label:not(:last-of-type) {
    border-right: 1px solid var(--border-primary);
}

/* ===================================================================================
 * TOGGLE BUTTON & SIMULATION VISIBILITY CONTROL
 * =================================================================================== */

/* 1. Logic: Hide/Show Section based on Checkbox */
/* We assume the section comes AFTER the input in HTML structure */

/* Hide the actual checkbox input */
input.simulation-toggle-control {
    display: none;
}

/* When Toggle is UNCHECKED (Off) -> Hide the Section */
input.simulation-toggle-control:not(:checked) ~ .simulation-settings-container {
    max-height: 0;
    opacity: 0;
    margin-top: 0;
    padding-top: 0;
    padding-bottom: 0;
    overflow: hidden;
    transform: translateY(-10px);
    pointer-events: none; /* Prevents clicking while hidden */
    transition: 
        max-height 0.5s cubic-bezier(0, 1, 0, 1),
        opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        margin 0.3s ease,
        transform 0.3s ease;
}

/* When Toggle is CHECKED (On) -> Show the Section */
input.simulation-toggle-control:checked ~ .simulation-settings-container {
    max-height: 1500px; /* Arbitrary large height to fit content */
    opacity: 1;
    transform: translateY(0);
    transition: 
        max-height 0.8s ease-in-out,
        opacity 0.4s ease-in,
        transform 0.4s ease;
}


/* 2. Visual Styling of the Toggle Button */

.simulation-toggle-visual {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    padding: var(--space-3) var(--space-2);
    margin: var(--space-4) 0;
    cursor: pointer;
    border-radius: var(--radius-md);
    transition: background-color 0.2s ease;
    user-select: none;
}

.simulation-toggle-visual:hover {
    background-color: var(--bg-tertiary);
}

/* Switch Track (Background) */
.toggle-switch-wrapper {
    position: relative;
    width: 48px;
    height: 26px;
    flex-shrink: 0; /* Prevent shrinking */
}

.toggle-track {
    width: 100%;
    height: 100%;
    background-color: var(--bg-tertiary);
    border: 1px solid var(--border-primary);
    border-radius: 20px;
    transition: background-color 0.3s ease, border-color 0.3s ease;
}

/* Switch Thumb (Circle) */
.toggle-thumb {
    position: absolute;
    top: 3px;
    left: 3px;
    width: 20px;
    height: 20px;
    background-color: var(--text-secondary);
    border-radius: 50%;
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), background-color 0.3s ease;
    box-shadow: 0 1px 3px rgba(0,0,0,0.3);
}

/* Text Styling */
.toggle-text-content {
    display: flex;
    flex-direction: column;
}

.toggle-title {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 1rem;
}

.toggle-description {
    color: var(--text-secondary);
    font-size: 0.8rem;
    margin-top: 2px;
}

/* 3. Active State Styling (Controlled by Sibling Selector) */

/* When Checked: Color the Track */
input.simulation-toggle-control:checked + .simulation-toggle-visual .toggle-track {
    background-color: var(--accent-primary);
    border-color: var(--accent-primary);
}

/* When Checked: Move and Color the Thumb */
input.simulation-toggle-control:checked + .simulation-toggle-visual .toggle-thumb {
    transform: translateX(22px);
    background-color: #ffffff;
}

/* When Checked: Highlight Title */
input.simulation-toggle-control:checked + .simulation-toggle-visual .toggle-title {
    color: var(--accent-primary);
}